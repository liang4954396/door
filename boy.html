	<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>打砖块</title>
    <style type="text/css">
    *{
        margin: 0;
        padding: 0;
    }
	#box{
		width:1000px;
		height:800px;
		background:pink;
		position:relative;
		margin:0 auto;
	}
	#ball{
		width:20px;
		height:20px;
		background:red;
		border-radius:50px;
		position:absolute;
		left:490px;
		bottom:15px;
		z-index:1;
	}
	#ban{
		width:150px;
		height:15px;
		background:orange;
		border-radius:10px;
		position:absolute;
		left:425px;
		bottom:0;
	}
	ul{
		list-style:none;
		
	}
	li{
		
		width:100px;
		height:30px;
		position:absolute;
		left:0;
		top:0;
	}
	#btn{
		display:block;
		width:100px;
		height:30px;
		margin:0 auto;
		background:green;
		font-size:20px;
		}
    </style>
</head>
<body>
   <div id="box">
		<div id="ball"></div>
		<div id="ban"></div>
		<ul>
			<li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
		</ul>		
   </div>
   <input id="btn"type="button" value="开始游戏"/>
</body>
</html>
<script type="text/javascript">
	function $(str){
		if(str.charAt(0)=="#"){
			return document.getElementById(str.substring(1));
		}else if(str.charAt(0)=="."){
			return document.getElementsByClassName(str.substring(1));
		}else{
			return document.getElementsByTagName(str);
		}
	}
	//取随机颜色
	function colors(min,max){
		return Math.floor(Math.random()*(max-min+1)+min);
	}
	//打砖块构造函数
	function go(){
		this.box = $("#box");		//容器
		this.ball = $("#ball");		//小球
		this.ban = $("#ban");		//挡板
		this.lis = $("li");			//砖块
		this.left1 = 0;				//砖块初始位置
		this.top1 = 0;				//砖块初始位置
		this.speedX = 1;			//小球横向速度方向
		this.speedY = -1;			//小球纵向速度方向
	
	}
	//摆放每个砖的位置(初始化功能)
	go.prototype.init = function(){
		for(let i=0; i<this.lis.length; i++){
		this.lis[i].style.backgroundColor="rgb("+colors(0,255)+","+colors(0,255)+","+colors(0,255)+")";			
			var x = this.left1*this.lis[0].offsetWidth;
			var y = this.top1;
			this.lis[i].style.left=x+"px";
			this.lis[i].style.top=y+"px";
			this.left1++;
			if((i+1)%10==0){
				this.left1 = 0;
				this.top1 += this.lis[0].offsetHeight;
			}
		}
	}
	
	//挡板的按下
	go.prototype.keydown = function(){
		var obj = this;
		document.onkeydown = function(event){
			var evt = event || window.event;
			if(evt.keyCode==37){
				obj.ban.style.left = obj.ban.offsetLeft-45+"px";
				if(obj.ban.offsetLeft<=0){
					obj.ban.style = 0+"px;";
				}
			}
			if(evt.keyCode==39){
				obj.ban.style.left = obj.ban.offsetLeft+45+"px";
				if(obj.ban.offsetLeft>=obj.box.offsetWidth-obj.ban.offsetWidth){
					obj.ban.style.left = obj.box.offsetWidth-obj.ban.offsetWidth+"px";
				}
			}
		}
	}
	//小球的移动
	go.prototype.move = function(){
		let obj = this;
		let timer = setInterval(function(){
			obj.ball.style.left = obj.ball.offsetLeft+obj.speedX+"px";
			obj.ball.style.top = obj.ball.offsetTop+obj.speedY+"px";
		//上
			if(obj.ball.offsetTop<=0){
				obj.speedY *= -1;
			}
		//左
			if(obj.ball.offsetLeft<=0){
				obj.speedX *= -1;
			}
		//右
			if(obj.ball.offsetLeft>=obj.box.offsetWidth-obj.ball.offsetWidth){
				obj.speedX *= -1;
			}
		//下
			if(obj.ball.offsetTop>=obj.box.offsetHeight-obj.ball.offsetHeight){
				clearInterval(timer);
				alert("game over");
			}
		//小球和挡板的碰撞
			if(obj.ball.offsetTop+obj.ball.offsetHeight>=obj.ban.offsetTop){
				if(obj.ball.offsetLeft+obj.ball.offsetWidth>=obj.ban.offsetLeft){
					if(obj.ball.offsetLeft<=obj.ban.offsetWidth+obj.ban.offsetLeft){
						obj.speedY *= -1;
					}
				}
			}
			
		//小球和砖块的碰撞
			for(let i=0; i<obj.lis.length; i++){
				if(obj.ball.offsetTop<=obj.lis[i].offsetHeight+obj.lis[i].offsetTop){
					if(obj.ball.offsetLeft>=obj.lis[i].offsetLeft){
						if(obj.ball.offsetLeft<=obj.lis[i].offsetLeft+obj.lis[i].offsetWidth){
							obj.speedY *= -1;
							obj.lis[i].style.display ="none"; 
						}
					}
				}
			}
		
		},1)
	}
	
	var xin = new go;
	xin.init();
	
	$("#btn").onclick = function(){
		xin.keydown();
		xin.move();
	}

</script>